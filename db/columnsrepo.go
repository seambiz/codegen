package db

import (
	"database/sql"

	"bitbucket.org/codegen"
	"bitbucket.org/codegen/db/mysql"
)

// GENERATED BY CODEGEN. DO NOT EDIT.
// ^^ END OF GENERATED BY CODEGEN. DO NOT EDIT. ^^

/* ColumnsRepo implemente ColumnsRepository interface definition. */
type ColumnsRepo struct {
	conn *sql.DB
}

func NewColumnsRepo(conn *sql.DB) *ColumnsRepo {
	return &ColumnsRepo{
		conn: conn,
	}
}

func (r ColumnsRepo) Create(ctx *codegen.BaseContext, data *codegen.Columns) error {
	panic("not implemented")
}

func (r ColumnsRepo) Update(ctx *codegen.BaseContext, data *codegen.Columns) error {
	panic("not implemented")
}

func (r ColumnsRepo) UpdatePartial(ctx *codegen.BaseContext, data *codegen.ColumnsPartial) error {
	panic("not implemented")
}

func (r ColumnsRepo) Delete(ctx *codegen.BaseContext, data *codegen.Columns) error {
	panic("not implemented")
}

func (r ColumnsRepo) Upsert(ctx *codegen.BaseContext, data []*codegen.Columns) error {
	panic("not implemented")
}

func (r ColumnsRepo) QueryBySchemaAndTable(ctx *codegen.BaseContext, schema, table string) ([]*codegen.Columns, error) {
	return mysql.NewColumnsStore(ctx, r.conn).
		Where("UPPER(table_schema) = UPPER(?) AND UPPER(table_name) = UPPER(?) AND UPPER(extra) not like '%VIRTUAL%'").
		OrderBy("ordinal_position").
		Query(schema, table)
}
