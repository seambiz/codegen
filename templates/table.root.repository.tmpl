{{- $schema := .Schema }}
package {{ .Conf.RootPackage }}

//go:generate go run github.com/maxbrunsfeld/counterfeiter/v6 . {{ .Table.Title }}Repository

// GENERATED BY CODEGEN. DO NOT EDIT.
/* {{ .Table.Title }}Repository interface definition. */
type {{ .Table.Title }}Repository interface {
	
	{{- if $schema.IsMultiTenant }}
		{{ if not .Table.NoCreate }}Create({{ if .Table.Audit }}userID int, {{ end }}{{ $schema.MTVarName }} {{ $schema.MTVarType }}, data *{{ .Table.Title }}) error{{ end }}
		{{ if not .Table.NoUpdate }}Update({{ if .Table.Audit }}userID int, {{ end }}{{ $schema.MTVarName }} {{ $schema.MTVarType }}, data *{{ .Table.Title }}) error{{ end }}
		{{ if not .Table.NoDelete }}Delete({{ if .Table.Audit }}userID int, {{ end }}{{ $schema.MTVarName }} {{ $schema.MTVarType }}, data *{{ .Table.Title }}) error{{ end }}
	{{ else }}
		{{ if not .Table.NoCreate }}Create({{ if .Table.Audit }}userID int, {{ end }}data *{{ .Table.Title }}) error{{ end }}
		{{ if not .Table.NoUpdate }}Update({{ if .Table.Audit }}userID int, {{ end }}data *{{ .Table.Title }}) error{{ end }}
		{{ if not .Table.NoDelete }}Delete({{ if .Table.Audit }}userID int, {{ end }}data *{{ .Table.Title }}) error{{ end }}
	{{- end }}
	
	{{- $table := .Table }}
	{{- range $index := .Table.Indices }}
		{{- if $index.Generate }}
		{{- if $index.IsUnique }}
		OneBy
			{{- range $i, $field := $index.Fields -}}
				{{- if gt $i 0 -}}
					And
				{{- end -}}
				{{ $f := index $table.Fields (index  $table.FieldMapping $field) }}{{ $f.Title }}
			{{- end -}}
			
			{{- if $schema.IsMultiTenant -}}
				({{ $schema.MTVarName }} {{ $schema.MTVarType }},
			{{- else -}}
				(
			{{- end }}
			
			{{- range $i, $field := $index.Fields -}}
				{{- if gt $i 0 -}}
					,
				{{- end -}}
				{{ $f := index $table.Fields (index  $table.FieldMapping $field) }}{{  $f.ParamName }} {{ $f.GoType }}
			{{- end -}}
			) (*{{ $table.Title }}, error)
		{{- end -}}
		{{- end -}}
	{{ end }}

	// ^^ END OF GENERATED BY CODEGEN. DO NOT EDIT. ^^
}