package {{ .Conf.RootPackage }}

// GENERATED BY CODEGEN. 

{{ range $schema := .Conf.Schemas }}
	{{ range $table := $schema.Tables }}
    {{- if $table.Generate}}
	/* {{ $table.Title }} represents a row from {{ $table.Name }}. */
type {{ $table.Title }} struct {
	{{ range $field := $table.Fields -}}
	{{ $field.Title }} {{ if $field.IsNullable }}*{{ end }}{{ $field.GoType }} `json:"{{ $field.Name }}" db:"{{ lower $field.Name }}"`
	{{ end -}}

	{{- range $fk := $table.ForeignKeys }}
	{{ $fk.CustomName }} {{ if not $fk.IsUnique }}[]{{ end }}*{{ $fk.RefTableTitle }} `json:"{{ lower $fk.CustomName }},omitempty"`
	{{- end }}
}
	{{ end }}
	{{ end }}
{{ end }}

{{/* Partial data type */}}
{{ range $schema := .Conf.Schemas }}
	{{ range $table := $schema.Tables }}
    {{- if $table.Generate}}
	/* {{ $table.Title }}Partial is used for updating specific columns from {{ $table.Name }}. */
type {{ $table.Title }}Partial struct {
	{{ $table.Title }}
	Touched big.Int
}
	{{ range $field := $table.Fields }}
func (p *{{ $table.Title }}Partial) Set{{ $field.Title }}(param {{ if $field.IsNullable }}*{{ end }}{{ $field.GoType }}) {
	p.{{ $field.Title }} = param
	p.Touched.SetBit(&p.Touched, {{ $table.Title }}_{{ $field.Title }}, 1)
}
	{{- end -}}
	{{- end -}}
	{{- end -}}
{{- end }}

// ^^ END OF GENERATED BY CODEGEN. ^^

